FROM grafana/grafana

USER grafana

ARG GF_INSTALL_PLUGINS="grafana-worldmap-panel,grafana-clock-panel,grafana-piechart-panel,satellogic-3d-globe-panel,ryantxu-ajax-panel,btplc-alarm-box-panel,ryantxu-annolist-panel,novalabs-annotations-panel,michaeldmoore-annunciator-panel,farski-blendstat-panel,yesoreyeram-boomtable-panel,yesoreyeram-boomtheme-panel,digiapulssi-breadcrumb-panel,digrich-bubblechart-panel,neocat-cal-heatmap-panel,petrslavotinek-carpetplot-panel,briangann-gauge-panel,briangann-datatable-panel,jdbranham-diagram-panel,natel-discrete-panel,larona-epict-panel,agenty-flowcharting-panel,citilogics-geoloop-panel,savantly-heatmap-panel,mtanda-heatmap-epoch-panel,mtanda-histogram-panel,pierosavi-imageit-panel,natel-influx-admin-panel,michaeldmoore-multistat-panel,digiapulssi-organisations-panel,zuburqan-parity-report-panel,btplc-peak-report-panel,bessler-pictureit-panel,natel-plotly-panel,grafana-polystat-panel,corpglory-progresslist-panel,snuids-radar-panel,scadavis-synoptic-panel,mxswat-separator-panel,blackmirror1-singlestat-math-panel,blackmirror1-statusbygroup-panel,btplc-status-dot-panel,vonage-status-panel,flant-statusmap-panel,marcuscalidus-svg-panel,gretamosa-topology-panel,pr0ps-trackmap-panel,snuids-trafficlights-panel,smartmakers-trafficlight-panel,btplc-trend-box-panel,fatcloud-windrose-panel,akumuli-datasource,praj-ams-datasource,grafana-azure-data-explorer-datasource,grafana-azure-monitor-datasource,rackerlabs-blueflood-datasource,vertamedia-clickhouse-datasource,foursquare-clouderamanager-datasource,cognitedata-datasource,sbueringer-consul-datasource,dalmatinerdb-datasource,andig-darksky-datasource,devicehive-devicehive-datasource,abhisant-druid-datasource,ayoungprogrammer-finance-datasource,grafana-influxdb-flux-datasource,gnocchixyz-gnocchi-datasource,doitintl-bigquery-datasource,mtanda-google-calendar-datasource,hawkular-datasource,udoprog-heroic-datasource,ibm-apm-datasource,grafana-influxdb-08-datasource,instana-datasource,simpod-json-datasource,grafana-kairosdb-datasource,paytm-kapacitor-datasource,linksmart-hds-datasource,linksmart-sensorthings-datasource,logzio-datasource,goshposh-metaqueries-datasource,monasca-datasource,monitoringartist-monitoringart-datasource,radensolutions-netxms-datasource,ntop-ntopng-datasource,fastweb-openfalcon-datasource,gridprotectionalliance-openhistorian-datasource,oci-datasource,gridprotectionalliance-osisoftpi-datasource,xginn8-pagerduty-datasource,sni-pnp-datasource,camptocamp-prometheus-alertmanager-datasource,jasonlashua-prtg-datasource,quasardb-datasource,sidewinder-datasource,fzakaria-simple-annotations-datasource,grafana-simple-json-datasource,skydive-datasource,fetzerch-sunandmoon-datasource,sni-thruk-datasource,natel-usgs-datasource,ovh-warp10-datasource,raintank-worldping-app,alexanderzobnin-zabbix-app,kentik-app,ns1-app,voxter-app,percona-percona-app,belugacdn-app,bosun-app,cloudflare-app,ddurieux-glpi-app,grafana-kubernetes-app,moogsoft-aiops-app,opennms-helm-app,grafana-sensu-app,raintank-snap-app,stagemonitor-elasticsearch-app"

RUN if [ ! -z "${GF_INSTALL_PLUGINS}" ]; then \
    OLDIFS=$IFS; \
        IFS=','; \
    for plugin in ${GF_INSTALL_PLUGINS}; do \
        IFS=$OLDIFS; \
        grafana-cli --pluginsDir "$GF_PATHS_PLUGINS" plugins install ${plugin}; \
    done; \
fi